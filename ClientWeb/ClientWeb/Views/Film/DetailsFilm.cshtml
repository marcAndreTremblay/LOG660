@model ClientWeb.ViewModel.FilmViewModel
@{
    ViewBag.Title = "DetailsFilm";
}

<h2>DetailsFilm</h2>

<div>
    <h4>Film</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Film.Titre)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.Titre)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Film.AnneeSortie)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.AnneeSortie)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Film.LangueOriginale)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.LangueOriginale)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Film.DureeMinutes)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.DureeMinutes)
        </dd>

        @if (Model.Film.Scenaristes != null)
            {
            <dt>
                @Html.DisplayNameFor(model => model.Film.Scenaristes[0])
            </dt>

            foreach (var item in Model.Film.Scenaristes)
            {
                <dd>
                    @Html.DisplayFor(modelItem => item.Nom)
                </dd>
            }
        }

        <dt>
            @Html.DisplayNameFor(model => model.Film.Pays)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.Pays)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Film.Genres)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.Genres)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Film.Realisateurs.ToArray()[0])
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.Realisateurs.ToArray()[0].Personne.Prenom) @Html.DisplayFor(model => model.Film.Realisateurs.ToArray()[0].Personne.NomFamille)
        </dd>

        @if (Model.Film.FilmActeurs != null)
            {
            <dt>
                Acteurs
            </dt>

            foreach (var item in Model.Film.FilmActeurs)
            {
                <dd>
                    @Html.DisplayFor(modelItem => item.Personne.Prenom) @Html.DisplayFor(modelItem => item.Personne.NomFamille), jouant @Html.DisplayFor(modelItem => item.Personnage)
                </dd>
            }
        }
        <dt>
            @Html.DisplayNameFor(model => model.Film.Resume)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.Resume)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Film.NbCopieRestante)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Film.NbCopieRestante)
        </dd>
    </dl>
    @* TODO: IMPLEMENT THIS
    @if (Model.Client.Forfait.LocationMax >= Model.Client.GetNbLocationsEnCours())
    {
        <p>Impossible de louer le film, car on possède deja @Model.Client.GetNbLocationsEnCours() locations en cours alors que notre forfait nous en permet seulement @Model.Client.Forfait.LocationMax</p>
    }
    else if (Model.Film.NbCopieRestante < 1)
    {
        <p>Impossible de louer le film car il n'en reste plus</p>
    }
    else
    {
        <p>Impossible de louer le film, car on possède deja @Model.Client.GetNbLocationsEnCours() locations en cours alors que notre forfait nous en permet seulement @Model.Client.Forfait.LocationMax</p>
    }*@
</div>
<p>
    @Html.ActionLink("Revenir à la recherche", "ListeFilm")
</p>